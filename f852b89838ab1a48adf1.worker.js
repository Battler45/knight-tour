!function(o){var t={};function n(e){if(t[e])return t[e].exports;var r=t[e]={i:e,l:!1,exports:{}};return o[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=o,n.c=t,n.d=function(e,r,o){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(r,e){if(1&e&&(r=n(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var t in r)n.d(o,t,function(e){return r[e]}.bind(null,t));return o},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=1)}([function(e,r,o){e.exports=function(){return new Worker(o.p+"a1b33b3085fda2db0a66.worker.js")}},function(e,r,o){"use strict";o.r(r);var i,t,n,a,s,l,c,u,h,f,d=o(0),p=o.n(d);(t=i=i||{})[t.SearchPrepared=0]="SearchPrepared",t[t.SearchStarted=1]="SearchStarted",t[t.SearchReport=2]="SearchReport",t[t.SearchStopped=3]="SearchStopped",(a=n=n||{})[a.SearchPrepare=0]="SearchPrepare",a[a.SearchStart=1]="SearchStart",a[a.SearchStop=2]="SearchStop",(l=s=s||{})[l.SearchError=0]="SearchError",l[l.SearchStarted=1]="SearchStarted",l[l.SearchStopped=2]="SearchStopped",l[l.SearchProgress=3]="SearchProgress",l[l.SearchResult=4]="SearchResult",(u=c=c||{})[u.SearchStart=0]="SearchStart",u[u.SearchStop=1]="SearchStop",(f=h=h||{})[f.A=1]="A",f[f.B=2]="B",f[f.C=3]="C",f[f.D=4]="D",f[f.E=5]="E",f[f.F=6]="F",f[f.G=7]="G",f[f.H=8]="H";var v=(b.createFromCells=function(e){if(!e)throw new Error("Cells are not specified.");var r=new b;return r._cells=b.cloneCells(e),r},b.createFromJSON=function(e){if(!e)throw new Error("Board is not speicifed.");var r=new b;return r._cells=b.cloneCells(e.cells),r},b.generateUntouchedCells=function(e,r){if(void 0===e&&(e=3),void 0===r&&(r=3),e<3)throw new Error("The board width cannot be less than 3.");var o=Object.keys(h).length/2;if(o<e)throw new Error("The board width cannot be more than "+o+".");if(r<3)throw new Error("The board height cannot be less than 3.");for(var t=[],n=0;n<r;n++){for(var a=[],i=0;i<e;i++)a.push(b.untouchedCellValue);t.push(a)}return t},b.cloneCells=function(e){if(!e)throw new Error("Cells are not specified.");var r=[];return e.forEach(function(e){r.push(e.slice())}),r},Object.defineProperty(b.prototype,"cells",{get:function(){return this._cells},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"countOfColumns",{get:function(){return this.cells[0].length},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"countOfRows",{get:function(){return this.cells.length},enumerable:!0,configurable:!0}),b.prototype.castCoordinateFromMatrixToBoard=function(e){if(!e)throw new Error("Coordinate is not specified.");return{letter:e.row+1,number:this.countOfRows-e.row}},b.prototype.castCoordinateFromBoardToMatrix=function(e){if(!e)throw new Error("Coordinate is not specified.");return{row:this.countOfRows-e.number,column:e.letter-1}},b.prototype.asJSON=function(){return{cells:b.cloneCells(this.cells)}},b.untouchedCellValue=-1,b.startingCellValue=0,b);function b(){this._cells=[]}var w=(Object.defineProperty(m.prototype,"board",{get:function(){return this._board},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"maxCountOfMoves",{get:function(){return this.board?this.board.countOfRows*this.board.countOfColumns:0},enumerable:!0,configurable:!0}),m.create=function(e){if(!e)throw new Error("Board is not specified.");return new m(e)},m.prototype.setBoard=function(e){if(!e)throw new Error("Board is not specified.");this._board=e},m.prototype.checkIfMoveAvailable=function(e){if(!e)throw new Error("Coordinate is not specified.");return 0<=e.column&&0<=e.row&&e.column<this.board.countOfColumns&&e.row<this.board.countOfRows&&this.board.cells[e.row][e.column]===v.untouchedCellValue},m.prototype.findAllAvailableMoves=function(r){return void 0===r&&(r=null),r=r||this.findLastMove(),this._availableMovesGenerators.map(function(e){return e(r)}).filter(function(e){return null!==e})},m.prototype.findAllMovesCombinations=function(e,r,o){if(void 0===r&&(r=null),void 0===o&&(o=null),e<1)throw new Error("Depth cannot be less than 1.");if(null===r&&null===(r=this.findLastMove()))throw new Error("Cannot determine the coordinate to start search from.");null===o&&(o=this.board.cells[r.row][r.column]),this._movesCombinations=[];var t=v.createFromJSON(this.board.asJSON());return this.findAllMovesCombinationsRecursively(t,r,o,e),this._movesCombinations},m.prototype.findLastMove=function(){if(!this.board)throw new Error("Board is not specified.");for(var e=null,r=-1,o=-1,t=v.untouchedCellValue,n=0;n<this.board.countOfRows;n++)for(var a=0;a<this.board.countOfColumns;a++){var i=this.board.cells[n][a];t<i&&(r=n,o=a,t=i)}return t!==v.untouchedCellValue&&-1!==r&&-1!==o&&(e={row:r,column:o}),e},m.prototype.setStartingPosition=function(e){if(!e)throw new Error("Coordinate is not specified.");this.board.cells[e.row][e.column]=v.startingCellValue},m.prototype.takeMove=function(e,r){if(!e)throw new Error("Coordinate is not specified.");if(r<=v.startingCellValue)throw new Error("Move number should be greater than "+v.startingCellValue);if(!this.checkIfMoveAvailable(e))throw new Error("Moving on the unavailable cell.");this.board.cells[e.row][e.column]=r},m.prototype.untakeMove=function(e){if(!e)throw new Error("Coordinate is not specified.");this.board.cells[e.row][e.column]=v.untouchedCellValue},m.prototype.findAllMovesCombinationsRecursively=function(e,r,o,t){if(0!==t)for(var n=m.create(e),a=n.findAllAvailableMoves(r),i=0;i<a.length;i++){var s=a[i];n.takeMove(s,o+1);var l=v.createFromJSON(n.board.asJSON());1===t?this._movesCombinations.push(l):this.findAllMovesCombinationsRecursively(l,s,o+1,t-1),n.untakeMove(s)}},m);function m(e){var o=this;this._board=null,this._movesCombinations=null,this._availableMovesGenerators=[function(e){var r={column:e.column+1,row:e.row-2};return o.checkIfMoveAvailable(r)?r:null},function(e){var r={column:e.column+2,row:e.row-1};return o.checkIfMoveAvailable(r)?r:null},function(e){var r={column:e.column+2,row:e.row+1};return o.checkIfMoveAvailable(r)?r:null},function(e){var r={column:e.column+1,row:e.row+2};return o.checkIfMoveAvailable(r)?r:null},function(e){var r={column:e.column-1,row:e.row+2};return o.checkIfMoveAvailable(r)?r:null},function(e){var r={column:e.column-2,row:e.row+1};return o.checkIfMoveAvailable(r)?r:null},function(e){var r={column:e.column-2,row:e.row-1};return o.checkIfMoveAvailable(r)?r:null},function(e){var r={column:e.column-1,row:e.row-2};return o.checkIfMoveAvailable(r)?r:null}],this.setBoard(e)}var S,g,T,P,y,C,M,O,k,E=self;function A(e,r){return{tag:e,type:c.SearchStart,board:r,maxThreadCount:null}}E.onmessage=function(e){var r=e.data;switch(r.type){case n.SearchPrepare:!function(e){if(g)throw new Error("The search is already in progress.");var r=new w(v.createFromJSON(e.board));C=function(e,r){var o=[],t=0;for(;t++,o=e.findAllMovesCombinations(t),o.length<r;);return o}(r,e.countOfThreads),O=[],k=[],M=[],y={movesTakenPerThread:[],movesTakenWithProgressPerThread:[],boardsSolvingPerThread:[],solutionsFoundPerThread:[]};for(var o=0;o<e.countOfThreads;o++)O.push(new p.a),k.push(!1),y.movesTakenPerThread.push(0),y.movesTakenWithProgressPerThread.push(0),y.solutionsFoundPerThread.push([]);var t=C.slice(0,e.countOfThreads).map(function(e){return e.asJSON()}),n={type:i.SearchPrepared,boardsPerThread:t};E.postMessage(n),S=!0,T=!1}(r);break;case n.SearchStart:!function(e){if(!S)throw new Error("The search should be prepared first.");if(g)throw new Error("The search is already in progress.");O.forEach(function(e,r){e.onmessage=function(e){var r=e.data;switch(r.type){case s.SearchStarted:!function(e){var r=+e.tag;y.boardsSolvingPerThread[r]=e.board}(r);break;case s.SearchProgress:!function(e){var r=+e.tag;y.movesTakenWithProgressPerThread[r]=y.movesTakenPerThread[r]+e.movesTaken}(r);break;case s.SearchResult:!function(e){var r=+e.tag;y.solutionsFoundPerThread[r].push(e.board),M[r]||(M[r]=[]),M[r].push(e.board)}(r);break;case s.SearchStopped:!function(e){var r=+e.tag;y.movesTakenPerThread[r]+=e.countOfMoves,y.movesTakenWithProgressPerThread[r]=y.movesTakenPerThread[r];var o=C.shift();if(o){var t=A(String(r),o.asJSON());O[r].postMessage(t)}else k[r]=!1,k.every(function(e){return!e})&&(T=!0)}(r)}},e.onerror=function(e){return console.error(e)};var o=C.shift(),t=A(String(r),o.asJSON());e.postMessage(t),k[r]=!0}),function(e){P=setInterval(function(){for(var e=0,r=0,o=0;o<O.length;o++)e+=y.solutionsFoundPerThread[o].length,r+=y.movesTakenWithProgressPerThread[o];var t=y.solutionsFoundPerThread.map(function(e){return e.length}),n={type:i.SearchReport,totalSolutionsFound:e,totalMovesTaken:r,newSolutionsFoundPerThread:M,solutionsFoundCountPerThread:t,movesTakenCountPerThread:y.movesTakenWithProgressPerThread,boardsPerThread:y.boardsSolvingPerThread,boardsActivePerThread:k};if(M=[],T){clearInterval(P),O.forEach(function(e){return e.terminate()});var a={type:i.SearchStopped,lastReport:n};E.postMessage(a)}else E.postMessage(n)},e)}(e.reportInterval);var r={type:i.SearchStarted};E.postMessage(r),g=!0}(r);break;case n.SearchStop:!function(){if(!g)throw new Error("The search is not in progress.");g=S=!1,T=!0}()}},E.onerror=function(e){return console.error(e)}}]);
//# sourceMappingURL=f852b89838ab1a48adf1.worker.js.map