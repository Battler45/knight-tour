!function(e){var n={};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(t,r,e){o.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:e})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(r,t){if(1&t&&(r=o(r)),8&t)return r;if(4&t&&"object"==typeof r&&r&&r.__esModule)return r;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:r}),2&t&&"string"!=typeof r)for(var n in r)o.d(e,n,function(t){return r[t]}.bind(null,n));return e},o.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(r,"a",r),r},o.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},o.p="",o(o.s=1)}([,function(t,r,e){"use strict";e.r(r);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};function s(t,r){function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}function c(t){return"function"==typeof t}var o=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;o=t},get useDeprecatedSynchronousErrorHandling(){return o}};function a(t){setTimeout(function(){throw t},0)}var h={closed:!0,next:function(t){},error:function(t){if(i.useDeprecatedSynchronousErrorHandling)throw t;a(t)},complete:function(){}},l=Array.isArray||function(t){return t&&"number"==typeof t.length};function f(t){return null!==t&&"object"==typeof t}function u(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,r){return r+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}u.prototype=Object.create(Error.prototype);var p=u,b=function(){function u(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var t;return u.prototype.unsubscribe=function(){var r;if(!this.closed){var t=this._parentOrParents,e=this._unsubscribe,n=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof u)t.remove(this);else if(null!==t)for(var o=0;o<t.length;++o){t[o].remove(this)}if(c(e))try{e.call(this)}catch(t){r=t instanceof p?d(t.errors):[t]}if(l(n)){o=-1;for(var i=n.length;++o<i;){var s=n[o];if(f(s))try{s.unsubscribe()}catch(t){r=r||[],t instanceof p?r=r.concat(d(t.errors)):r.push(t)}}}if(r)throw new p(r)}},u.prototype.add=function(t){var r=t;if(!t)return u.EMPTY;switch(typeof t){case"function":r=new u(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof u)){var e=r;(r=new u)._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var n=r._parentOrParents;if(null===n)r._parentOrParents=this;else if(n instanceof u){if(n===this)return r;r._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return r;n.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[r]:o.push(r),r},u.prototype.remove=function(t){var r=this._subscriptions;if(r){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}},u.EMPTY=((t=new u).closed=!0,t),u}();function d(t){return t.reduce(function(t,r){return t.concat(r instanceof p?r.errors:r)},[])}var v="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),y=function(o){function i(t,r,e){var n=o.call(this)||this;switch(n.syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,arguments.length){case 0:n.destination=h;break;case 1:if(!t){n.destination=h;break}if("object"==typeof t){t instanceof i?(n.syncErrorThrowable=t.syncErrorThrowable,(n.destination=t).add(n)):(n.syncErrorThrowable=!0,n.destination=new w(n,t));break}default:n.syncErrorThrowable=!0,n.destination=new w(n,t,r,e)}return n}return s(i,o),i.prototype[v]=function(){return this},i.create=function(t,r,e){var n=new i(t,r,e);return n.syncErrorThrowable=!1,n},i.prototype.next=function(t){this.isStopped||this._next(t)},i.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(t){this.destination.next(t)},i.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},i}(b),w=function(u){function t(t,r,e,n){var o,i=u.call(this)||this;i._parentSubscriber=t;var s=i;return c(r)?o=r:r&&(o=r.next,e=r.error,n=r.complete,r!==h&&(c((s=Object.create(r)).unsubscribe)&&i.add(s.unsubscribe.bind(s)),s.unsubscribe=i.unsubscribe.bind(i))),i._context=s,i._next=o,i._error=e,i._complete=n,i}return s(t,u),t.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;i.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},t.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber,e=i.useDeprecatedSynchronousErrorHandling;if(this._error)e&&r.syncErrorThrowable?this.__tryOrSetError(r,this._error,t):this.__tryOrUnsub(this._error,t),this.unsubscribe();else if(r.syncErrorThrowable)e?(r.syncErrorValue=t,r.syncErrorThrown=!0):a(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;a(t)}}},t.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};i.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?this.__tryOrSetError(r,e):this.__tryOrUnsub(e),this.unsubscribe()}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(t){if(this.unsubscribe(),i.useDeprecatedSynchronousErrorHandling)throw t;a(t)}},t.prototype.__tryOrSetError=function(r,t,e){if(!i.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,e)}catch(t){return i.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=t,r.syncErrorThrown=!0):(a(t),!0)}return!1},t.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},t}(y);var m="function"==typeof Symbol&&Symbol.observable||"@@observable";function _(){}function S(r){return r?1===r.length?r[0]:function(t){return r.reduce(function(t,r){return r(t)},t)}:_}var g=function(){function e(t){this._isScalar=!1,t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,e){var n=this.operator,o=function(t,r,e){if(t){if(t instanceof y)return t;if(t[v])return t[v]()}return t||r||e?new y(t,r,e):new y(h)}(t,r,e);if(n?o.add(n.call(o,this.source)):o.add(this.source||i.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),i.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(t){i.useDeprecatedSynchronousErrorHandling&&(r.syncErrorThrown=!0,r.syncErrorValue=t),!function(t){for(;t;){var r=t,e=r.closed,n=r.destination,o=r.isStopped;if(e||o)return!1;t=n&&n instanceof y?n:null}return!0}(r)?console.warn(t):r.error(t)}},e.prototype.forEach=function(n,t){var o=this;return new(t=E(t))(function(t,r){var e;e=o.subscribe(function(t){try{n(t)}catch(t){r(t),e&&e.unsubscribe()}},r,t)})},e.prototype._subscribe=function(t){var r=this.source;return r&&r.subscribe(t)},e.prototype[m]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?this:S(t)(this)},e.prototype.toPromise=function(t){var n=this;return new(t=E(t))(function(t,r){var e;n.subscribe(function(t){return e=t},function(t){return r(t)},function(){return t(e)})})},e.create=function(t){return new e(t)},e}();function E(t){if(!(t=t||(i.Promise||Promise)))throw new Error("no Promise impl found");return t}var O=function(o){function t(t,r,e){var n=o.call(this)||this;return n.parent=t,n.outerValue=r,n.outerIndex=e,n.index=0,n}return s(t,o),t.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},t.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(y),x=function(n){return function(t){for(var r=0,e=n.length;r<e&&!t.closed;r++)t.next(n[r]);t.complete()}};function T(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var P=T(),j=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function k(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var C=function(t){if(t&&"function"==typeof t[m])return function(e){return function(t){var r=e[m]();if("function"!=typeof r.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(t)}}(t);if(j(t))return x(t);if(k(t))return function(t){return function(r){return t.then(function(t){r.closed||(r.next(t),r.complete())},function(t){return r.error(t)}).then(null,a),r}}(t);if(t&&"function"==typeof t[P])return function(n){return function(t){for(var r=n[P]();;){var e=r.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof r.return&&t.add(function(){r.return&&r.return()}),t}}(t);var r=f(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+r+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};var M=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return s(r,t),r.prototype.notifyNext=function(t,r,e,n,o){this.destination.next(r)},r.prototype.notifyError=function(t,r){this.destination.error(t)},r.prototype.notifyComplete=function(t){this.destination.complete()},r}(y);var I=function(){function t(t,r){this.project=t,this.thisArg=r}return t.prototype.call=function(t,r){return r.subscribe(new A(t,this.project,this.thisArg))},t}(),A=function(o){function t(t,r,e){var n=o.call(this,t)||this;return n.project=r,n.count=0,n.thisArg=e||n,n}return s(t,o),t.prototype._next=function(t){var r;try{r=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(r)},t}(y);function N(n,o){return new g(function(t){var r=new b,e=0;return r.add(o.schedule(function(){e!==n.length?(t.next(n[e++]),t.closed||r.add(this.schedule())):t.complete()})),r})}function R(t,r){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(n,o){return new g(function(r){var e=new b;return e.add(o.schedule(function(){var t=n[m]();e.add(t.subscribe({next:function(t){e.add(o.schedule(function(){return r.next(t)}))},error:function(t){e.add(o.schedule(function(){return r.error(t)}))},complete:function(){e.add(o.schedule(function(){return r.complete()}))}}))})),e})}(t,r);if(k(t))return function(t,n){return new g(function(r){var e=new b;return e.add(n.schedule(function(){return t.then(function(t){e.add(n.schedule(function(){r.next(t),e.add(n.schedule(function(){return r.complete()}))}))},function(t){e.add(n.schedule(function(){return r.error(t)}))})})),e})}(t,r);if(j(t))return N(t,r);if(function(t){return t&&"function"==typeof t[P]}(t)||"string"==typeof t)return function(r,e){if(!r)throw new Error("Iterable cannot be null");return new g(function(n){var o,t=new b;return t.add(function(){o&&"function"==typeof o.return&&o.return()}),t.add(e.schedule(function(){o=r[P](),t.add(e.schedule(function(){if(!n.closed){var t,r;try{var e=o.next();t=e.value,r=e.done}catch(t){return void n.error(t)}r?n.complete():(n.next(t),this.schedule())}}))})),t})}(t,r)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function V(r,o,e){return void 0===e&&(e=Number.POSITIVE_INFINITY),"function"==typeof o?function(t){return t.pipe(V(function(e,n){return function(t,r){return r?R(t,r):t instanceof g?t:new g(C(t))}(r(e,n)).pipe(function(r,e){return function(t){if("function"!=typeof r)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new I(r,e))}}(function(t,r){return o(e,t,n,r)}))},e))}:("number"==typeof o&&(e=o),function(t){return t.lift(new J(r,e))})}var D,F,H,U,Y,B,J=function(){function t(t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=r}return t.prototype.call=function(t,r){return r.subscribe(new W(t,this.project,this.concurrent))},t}(),W=function(o){function t(t,r,e){void 0===e&&(e=Number.POSITIVE_INFINITY);var n=o.call(this,t)||this;return n.project=r,n.concurrent=e,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}return s(t,o),t.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},t.prototype._tryNext=function(t){var r,e=this.index++;try{r=this.project(t,e)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(r,t,e)},t.prototype._innerSub=function(t,r,e){var n=new O(this,void 0,void 0);this.destination.add(n),function(t,r,e,n,o){if(void 0===o&&(o=new O(t,e,n)),!o.closed)r instanceof g?r.subscribe(o):C(r)(o)}(this,t,r,e,n)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(t,r,e,n,o){this.destination.next(r)},t.prototype.notifyComplete=function(t){var r=this.buffer;this.remove(t),this.active--,0<r.length?this._next(r.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(M);function L(t){return t}function G(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=Number.POSITIVE_INFINITY,n=null,o=t[t.length-1];return!function(t){return t&&"function"==typeof t.schedule}(o)?"number"==typeof o&&(e=t.pop()):(n=t.pop(),1<t.length&&"number"==typeof t[t.length-1]&&(e=t.pop())),null===n&&1===t.length&&t[0]instanceof g?t[0]:function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),V(L,t)}(e)(function(t,r){return r?N(t,r):new g(x(t))}(t,n))}function K(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(t){return t.lift.call(G.apply(void 0,[t].concat(r)))}}(F=D=D||{})[F.SearchStart=0]="SearchStart",F[F.SearchStop=1]="SearchStop",(U=H=H||{})[U.SearchError=0]="SearchError",U[U.SearchStarted=1]="SearchStarted",U[U.SearchStopped=2]="SearchStopped",U[U.SearchProgress=3]="SearchProgress",U[U.SearchResult=4]="SearchResult",(B=Y=Y||{})[B.A=1]="A",B[B.B=2]="B",B[B.C=3]="C",B[B.D=4]="D",B[B.E=5]="E",B[B.F=6]="F",B[B.G=7]="G",B[B.H=8]="H";var z=(q.createFromCells=function(t){if(!t)throw new Error("Cells are not specified.");var r=new q;return r._cells=q.cloneCells(t),r},q.createFromJSON=function(t){if(!t)throw new Error("Board is not speicifed.");var r=new q;return r._cells=q.cloneCells(t.cells),r},q.generateUntouchedCells=function(t,r){if(void 0===t&&(t=3),void 0===r&&(r=3),t<3)throw new Error("The board width cannot be less than 3.");var e=Object.keys(Y).length/2;if(e<t)throw new Error("The board width cannot be more than "+e+".");if(r<3)throw new Error("The board height cannot be less than 3.");for(var n=[],o=0;o<r;o++){for(var i=[],s=0;s<t;s++)i.push(q.untouchedCellValue);n.push(i)}return n},q.cloneCells=function(t){if(!t)throw new Error("Cells are not specified.");var r=[];return t.forEach(function(t){r.push(t.slice())}),r},Object.defineProperty(q.prototype,"cells",{get:function(){return this._cells},enumerable:!0,configurable:!0}),Object.defineProperty(q.prototype,"countOfColumns",{get:function(){return this.cells[0].length},enumerable:!0,configurable:!0}),Object.defineProperty(q.prototype,"countOfRows",{get:function(){return this.cells.length},enumerable:!0,configurable:!0}),q.prototype.castCoordinateFromMatrixToBoard=function(t){if(!t)throw new Error("Coordinate is not specified.");return{letter:t.row+1,number:this.countOfRows-t.row}},q.prototype.castCoordinateFromBoardToMatrix=function(t){if(!t)throw new Error("Coordinate is not specified.");return{row:this.countOfRows-t.number,column:t.letter-1}},q.prototype.asJSON=function(){return{cells:q.cloneCells(this.cells)}},q.untouchedCellValue=-1,q.startingCellValue=0,q);function q(){this._cells=[]}var Q=(Object.defineProperty(X.prototype,"board",{get:function(){return this._board},enumerable:!0,configurable:!0}),Object.defineProperty(X.prototype,"maxCountOfMoves",{get:function(){return this.board?this.board.countOfRows*this.board.countOfColumns:0},enumerable:!0,configurable:!0}),X.create=function(t){if(!t)throw new Error("Board is not specified.");return new X(t)},X.prototype.setBoard=function(t){if(!t)throw new Error("Board is not specified.");this._board=t},X.prototype.checkIfMoveAvailable=function(t){if(!t)throw new Error("Coordinate is not specified.");return 0<=t.column&&0<=t.row&&t.column<this.board.countOfColumns&&t.row<this.board.countOfRows&&this.board.cells[t.row][t.column]===z.untouchedCellValue},X.prototype.findAllAvailableMoves=function(r){return void 0===r&&(r=null),r=r||this.findLastMove(),this._availableMovesGenerators.map(function(t){return t(r)}).filter(function(t){return null!==t})},X.prototype.findAllMovesCombinations=function(t,r,e){if(void 0===r&&(r=null),void 0===e&&(e=null),t<1)throw new Error("Depth cannot be less than 1.");if(null===r&&null===(r=this.findLastMove()))throw new Error("Cannot determine the coordinate to start search from.");null===e&&(e=this.board.cells[r.row][r.column]),this._movesCombinations=[];var n=z.createFromJSON(this.board.asJSON());return this.findAllMovesCombinationsRecursively(n,r,e,t),this._movesCombinations},X.prototype.findLastMove=function(){if(!this.board)throw new Error("Board is not specified.");for(var t=null,r=-1,e=-1,n=z.untouchedCellValue,o=0;o<this.board.countOfRows;o++)for(var i=0;i<this.board.countOfColumns;i++){var s=this.board.cells[o][i];n<s&&(r=o,e=i,n=s)}return n!==z.untouchedCellValue&&-1!==r&&-1!==e&&(t={row:r,column:e}),t},X.prototype.setStartingPosition=function(t){if(!t)throw new Error("Coordinate is not specified.");this.board.cells[t.row][t.column]=z.startingCellValue},X.prototype.takeMove=function(t,r){if(!t)throw new Error("Coordinate is not specified.");if(r<=z.startingCellValue)throw new Error("Move number should be greater than "+z.startingCellValue);if(!this.checkIfMoveAvailable(t))throw new Error("Moving on the unavailable cell.");this.board.cells[t.row][t.column]=r},X.prototype.untakeMove=function(t){if(!t)throw new Error("Coordinate is not specified.");this.board.cells[t.row][t.column]=z.untouchedCellValue},X.prototype.findAllMovesCombinationsRecursively=function(t,r,e,n){if(0!==n)for(var o=X.create(t),i=o.findAllAvailableMoves(r),s=0;s<i.length;s++){var u=i[s];o.takeMove(u,e+1);var c=z.createFromJSON(o.board.asJSON());1===n?this._movesCombinations.push(c):this.findAllMovesCombinationsRecursively(c,u,e+1,n-1),o.untakeMove(u)}},X);function X(t){var e=this;this._board=null,this._movesCombinations=null,this._availableMovesGenerators=[function(t){var r={column:t.column+1,row:t.row-2};return e.checkIfMoveAvailable(r)?r:null},function(t){var r={column:t.column+2,row:t.row-1};return e.checkIfMoveAvailable(r)?r:null},function(t){var r={column:t.column+2,row:t.row+1};return e.checkIfMoveAvailable(r)?r:null},function(t){var r={column:t.column+1,row:t.row+2};return e.checkIfMoveAvailable(r)?r:null},function(t){var r={column:t.column-1,row:t.row+2};return e.checkIfMoveAvailable(r)?r:null},function(t){var r={column:t.column-2,row:t.row+1};return e.checkIfMoveAvailable(r)?r:null},function(t){var r={column:t.column-2,row:t.row-1};return e.checkIfMoveAvailable(r)?r:null},function(t){var r={column:t.column-1,row:t.row-2};return e.checkIfMoveAvailable(r)?r:null}],this.setBoard(t)}function Z(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}Z.prototype=Object.create(Error.prototype);var $=Z,tt=function(n){function t(t,r){var e=n.call(this)||this;return e.subject=t,e.subscriber=r,e.closed=!1,e}return s(t,n),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,r=t.observers;if(this.subject=null,r&&0!==r.length&&!t.isStopped&&!t.closed){var e=r.indexOf(this.subscriber);-1!==e&&r.splice(e,1)}}},t}(b),rt=function(e){function t(t){var r=e.call(this,t)||this;return r.destination=t,r}return s(t,e),t}(y),et=function(r){function t(){var t=r.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return s(t,r),t.prototype[v]=function(){return new rt(this)},t.prototype.lift=function(t){var r=new nt(this,this);return r.operator=t,r},t.prototype.next=function(t){if(this.closed)throw new $;if(!this.isStopped)for(var r=this.observers,e=r.length,n=r.slice(),o=0;o<e;o++)n[o].next(t)},t.prototype.error=function(t){if(this.closed)throw new $;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var r=this.observers,e=r.length,n=r.slice(),o=0;o<e;o++)n[o].error(t);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new $;this.isStopped=!0;for(var t=this.observers,r=t.length,e=t.slice(),n=0;n<r;n++)e[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new $;return r.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(t){if(this.closed)throw new $;return this.hasError?(t.error(this.thrownError),b.EMPTY):this.isStopped?(t.complete(),b.EMPTY):(this.observers.push(t),new tt(this,t))},t.prototype.asObservable=function(){var t=new g;return t.source=this,t},t.create=function(t,r){return new nt(t,r)},t}(g),nt=function(n){function t(t,r){var e=n.call(this)||this;return e.destination=t,e.source=r,e}return s(t,n),t.prototype.next=function(t){var r=this.destination;r&&r.next&&r.next(t)},t.prototype.error=function(t){var r=this.destination;r&&r.error&&this.destination.error(t)},t.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},t.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):b.EMPTY},t}(et),ot=(Object.defineProperty(it.prototype,"interface",{get:function(){return this._interface},enumerable:!0,configurable:!0}),it.prototype.notifySearchStarted=function(t,r){var e={tag:t,board:r,type:H.SearchStarted};this._searchStartSubject.next(e)},it.prototype.notifySearchProgress=function(t,r,e){var n={type:H.SearchProgress,tag:t,movesTaken:r,movesUntaken:e};this._searchProgressSubject.next(n)},it.prototype.notifySearchResult=function(t,r){var e={type:H.SearchResult,tag:t,board:r};this._searchResultSubject.next(e)},it.prototype.notifySearchStopped=function(t,r){var e={tag:t,countOfMoves:r,type:H.SearchStopped};this._searchStopSubject.next(e)},it);function it(){this._searchStartSubject=new et,this._searchProgressSubject=new et,this._searchResultSubject=new et,this._searchStopSubject=new et,this._interface={searchStarts:this._searchStartSubject.asObservable(),searchProgressReportDone:this._searchProgressSubject.asObservable(),searchResultFound:this._searchResultSubject.asObservable(),searchStops:this._searchStopSubject.asObservable()}}var st=(Object.defineProperty(ut.prototype,"knight",{get:function(){return this._knight},enumerable:!0,configurable:!0}),Object.defineProperty(ut.prototype,"notifications",{get:function(){return this._notificatiionsWrapper.interface},enumerable:!0,configurable:!0}),ut.prototype.search=function(t){this._tag=t,this._movesTaken=0,this._movesUntaken=0,this._foundSolutions=[];var r=this.knight.findLastMove(),e=this.knight.board.cells[r.row][r.column];return this._notificatiionsWrapper.notifySearchStarted(this._tag,this.knight.board.asJSON()),this.searchKnightTour(r,e),this._notificatiionsWrapper.notifySearchStopped(this._tag,this._movesTaken),this._foundSolutions},ut.prototype.searchKnightTour=function(t,r){if(r===this.knight.maxCountOfMoves-1)return this.knight.board.asJSON();for(var e=this.knight.findAllAvailableMoves(t),n=0;n<e.length;n++){var o=e[n],i=r+1;this.knight.takeMove(o,i),this._movesTaken++,this._movesTaken%1e3==0&&this._notificatiionsWrapper.notifySearchProgress(this._tag,this._movesTaken,this._movesUntaken);var s=this.searchKnightTour(o,i);s&&(this._notificatiionsWrapper.notifySearchResult(this._tag,s),this._foundSolutions.push(s)),this.knight.untakeMove(o),this._movesUntaken++,this._movesUntaken%1e3==0&&this._notificatiionsWrapper.notifySearchProgress(this._tag,this._movesTaken,this._movesUntaken)}return null},ut);function ut(t){if(!t)throw new Error("Board is not specified.");this._knight=new Q(t),this._notificatiionsWrapper=new ot}var ct,at=self;at.addEventListener("message",function(t){var r=t.data;if(ct=r.tag,r.type===D.SearchStart){var e=r,n=new st(z.createFromJSON(e.board)),o=n.notifications,i=o.searchStarts,s=o.searchProgressReportDone,u=o.searchResultFound,c=o.searchStops;(new g).pipe(K(i)).pipe(K(s)).pipe(K(u)).pipe(K(c)).subscribe(function(t){at.postMessage(t)}),n.search(e.tag)}}),at.addEventListener("error",function(t){var r={tag:ct,type:H.SearchError,message:t.message};at.postMessage(r)})}]);
//# sourceMappingURL=a1b33b3085fda2db0a66.worker.js.map